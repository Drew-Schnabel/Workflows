name: Insurance Business Services Build

on:
  workflow_dispatch:  # Manually triggered, or you can adjust as needed
    inputs:
      branch:
        description: 'Branch to pull (default is development)'
        required: true
        default: 'development'

jobs:
  setup:
    runs-on: ubuntu-latest  # Use Ubuntu or Windows, depending on your preference

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20.x'  # Specify Node.js version

      - name: Create folder and navigate into it
        run: |
          mkdir -p Insurance-Business-Services
          cd Insurance-Business-Services

      - name: Git Pull - lipas-client
        run: |
          cd Insurance-Business-Services
          git clone --branch ${{ github.event.inputs.branch }} https://github.com/VAINS-Dev/LIPAS-Client.git
          cd lipas-client
          npm install

      - name: Git Pull - archer
        run: |
          cd Insurance-Business-Services
          git clone --branch ${{ github.event.inputs.branch }} https://github.com/VAINS-Dev/A.R.C.H.E.R.git
          cd archer
          npm install

      - name: Log successful completion
        run: echo "Repositories successfully cloned and dependencies installed."